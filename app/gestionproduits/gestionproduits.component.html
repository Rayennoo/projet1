<div class="gestion-container">
	<h2>Gestion des Produits</h2>

	<table class="produits-table">
		<thead>
			<tr>
				<th>Image</th>
				<th>Nom</th>
				<th>Catégorie</th>
				<th>Prix (tnd)</th>
				<th>Stock</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let p of produits">
				<td><img [src]="p.imageUrl" alt="{{p.nom}}" class="thumb" /></td>
				<td>{{ p.nom }}</td>
				<td>{{ p.categorie }}</td>
				<td>{{ p.prix.toFixed(2) }}</td>
				<td>{{ p.quantite }}</td>
				<td>
					<button class="btn" (click)="onEdit(p)">Modifier</button>
					<button class="btn danger" (click)="deleteProduit(p)">Supprimer</button>
				</td>
			</tr>
		</tbody>
	</table>

	<div class="modal-overlay" *ngIf="produitModelObj.id" (click)="cancelEdit()">
		<div class="modal-content" (click)="$event.stopPropagation()">
			<button class="modal-close" (click)="cancelEdit()">✕</button>
			<h3 class="modal-title">Modifier le produit</h3>
			<form [formGroup]="formValue" (ngSubmit)="updateProduitDetails()">
				<div class="form-row">
					<label>Nom</label>
					<input formControlName="nom" required />
				</div>
				<div class="form-row">
					<label>Description</label>
					<textarea formControlName="description" required></textarea>
				</div>
				<div class="form-row">
					<label>Prix(tnd)</label>
					<input type="number" step="0.01" min="0" formControlName="prix" required />
				</div>
				<div class="form-row">
					<label>Quantité</label>
					<input type="number" min="0" formControlName="quantite" required />
				</div>
				<div class="form-row">
					<label>Image URL</label>
					<input formControlName="imageUrl" required />
				</div>
				<div class="form-row">
					<label>Catégorie</label>
					<input formControlName="categorie" required />
				</div>
				<div class="actions">
					<button type="submit" class="btn primary">Enregistrer</button>
					<button type="button" class="btn" (click)="cancelEdit()">Annuler</button>
				</div>
			</form>
		</div>
	</div>
</div>
